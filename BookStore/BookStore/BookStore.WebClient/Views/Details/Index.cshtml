@model BookStore.WebClient.ViewModels.DetailsViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Details for @Model.CurrentMedia.Title </h2>

<p>
    <tr>
        <td> Name: </td>
        <td> @Model.CurrentMedia.Title </td>
    </tr>
</p>
<p>
    <tr>
        <td> Author: </td>
        <td> @Model.CurrentMedia.Author </td>
    </tr>
</p>
<p>
    <tr>
        <td> Genre: </td>
        <td> @Model.CurrentMedia.Genre </td>
    </tr>
</p>
<p>
    <tr>
        <td> Price: </td>
        <td> @Model.CurrentMedia.Price </td>
    </tr>
</p>
<p>
    <tr>
        <td> Likes: </td>
        <td> @Model.Likes </td>
    </tr>
</p>
<p>
    <tr>
        <td> Dislikes: </td>
        <td>
            @Model.Dislikes
        </td>
    </tr>
</p>


    @if (Model.HasPurchased)
    {
        <h3> Thanks for Purchasing this book. </h3>
        if (Model.RatingForBook == null)
        {
            <i> You have not rated this book yet. Please rate it. </i>
            <p>
                @Html.ActionLink("Like", "LikeBook", "Details", new { pLike = true, pMediaId = Model.CurrentMedia.Id, pReturnUrl = "" }, null)
                @Html.ActionLink("Dislike", "LikeBook", "Details", new { pLike = false, pMediaId = Model.CurrentMedia.Id, pReturnUrl = "" }, null)
            </p>
        }
        else if (Model.RatingForBook.Like == true)
        {
            <i> You have Liked this book. </i>
            @Html.ActionLink("Dislike", "LikeBook", "Details", new { pLike = false, pMediaId = Model.CurrentMedia.Id, pReturnUrl = "" }, null)
        }
        else if (Model.RatingForBook.Like == false)
        {
            <i> You have Disliked this book. </i>
            <p>@Html.ActionLink("Like", "LikeBook", "Details", new { pLike = true, pMediaId = Model.CurrentMedia.Id, pReturnUrl = "" }, null)</p>
        }
    }


<h3> People also liked: </h3>

@if (Model.RecommendedMedia.Count == 0)
{
    <i> Sorry, no one who liked this has liked any other book yet ... </i>
}

@foreach (var media in Model.RecommendedMedia)
{
    <tr>
        <td>
            <p>@Html.ActionLink(media.Title, "Index", "Details", new { pMediaId = media.Id, pReturnUrl = ViewContext.HttpContext.Request.Url.PathAndQuery }, null)</p>
        </td>
    </tr>
}
